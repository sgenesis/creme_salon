<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Corte Diario | CrÃªme Nails</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-6">

<h1 class="text-2xl font-bold mb-4">ðŸ“… Corte Diario</h1>

<div id="content" class="space-y-6"></div>

<script>
async function loadDailyCut(){
    const res = await fetch("/api/sales/daily-cut/", { credentials:"include" });
    const data = await res.json();

    let html = `
        <div class="p-4 bg-white rounded shadow">
            <h2 class="text-xl font-bold mb-3">Resumen del dÃ­a (${data.date})</h2>

            <p class="font-semibold">Total vendido: $${data.total_sales.toFixed(2)}</p>
            <p>Ventas realizadas: ${data.count_sales}</p>
        </div>

        <div class="p-4 bg-white rounded shadow">
            <h2 class="text-xl font-bold mb-3">MÃ©todos de pago</h2>
            <table class="w-full">
                <tr><th>MÃ©todo</th><th>Cantidad</th><th>Total</th></tr>
                ${data.by_payment.map(p => `
                    <tr>
                        <td>${p.payment_method}</td>
                        <td>${p.count}</td>
                        <td>$${parseFloat(p.total).toFixed(2)}</td>
                    </tr>
                `).join('')}
            </table>
        </div>

        <div class="p-4 bg-white rounded shadow">
            <h2 class="text-xl font-bold mb-3">Productos/Servicios Vendidos</h2>
            <table class="w-full">
                <tr><th>Producto</th><th>Veces vendido</th><th>Total</th></tr>
                ${data.items.map(i => `
                    <tr>
                        <td>${i.product__name || 'Servicio'}</td>
                        <td>${i.count}</td>
                        <td>$${parseFloat(i.total).toFixed(2)}</td>
                    </tr>
                `).join('')}
            </table>
        </div>
    `;

    document.getElementById("content").innerHTML = html;
}

loadDailyCut();
</script>

</body>
</html>
